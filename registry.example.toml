# MoonBit Registry Configuration Example
# Copy this file to registry.toml and customize for your needs

[registry]
# Name for your registry (used in logs and identification)
name = "my-company-registry"

# Directory to store index and packages
data_dir = "./data"

# ============================================================================
# OPTION 1: Legacy upstream config (simple single-source setup)
# ============================================================================
# [upstream]
# enabled = true
# url = "https://mooncakes.io"
# index_url = "https://mooncakes.io/git/index"

# ============================================================================
# OPTION 2: Multiple sources config (recommended for advanced setups)
# ============================================================================
# Use [[sources]] array when you need to:
# - Mirror from multiple registries
# - Create a registry chain (mooncakes -> your-registry -> other-registry)
# - Add authentication for private registries

# Primary source: mooncakes.io (the official MoonBit registry)
[[sources]]
name = "mooncakes"
type = "mooncakes"
url = "https://mooncakes.io"
index_url = "https://mooncakes.io/git/index"
index_type = "git"
enabled = true
priority = 100

# Example: A partner's private registry (uncomment to use)
# [[sources]]
# name = "partner"
# type = "moonbit-registry"
# url = "https://partner.example.com/registry"
# index_url = "https://partner.example.com/registry/git/index"
# index_type = "git"
# enabled = true
# priority = 50
# [sources.auth]
# type = "bearer"
# token = "${PARTNER_REGISTRY_TOKEN}"

# Set the default source for mirroring
default_source = "mooncakes"

[mirror]
# Automatically sync with upstream on a schedule
auto_sync = false

# Sync interval (e.g., "1h", "30m", "1d")
sync_interval = "1h"

# Package patterns to mirror (empty = mirror on demand)
# Examples:
#   - "moonbitlang/*" - all moonbitlang packages
#   - "company/pkg-*" - packages matching prefix
#   - "exact/package" - specific package
packages = []

[server]
# Host to bind the server to
host = "0.0.0.0"

# Port for the registry server
port = 8080

# Base URL for the registry (used in generated URLs)
# Change this to your actual domain in production
base_url = "http://localhost:8080"

[git]
# Remote URL to push index updates (optional)
# Leave empty to only use local storage
remote_url = ""

# Branch name for the index
branch = "main"

# Automatically push index changes to remote
auto_push = false
